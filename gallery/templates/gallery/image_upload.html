{% extends 'gallery/base.html' %}
{% load static %}

{% block content %}
<div class="upload-container">
    <h2>Új kép feltöltése</h2>
    <div class="upload-form-container">
        <form method="post" enctype="multipart/form-data" class="upload-form">
            {% csrf_token %}
            <div class="form-group">
                {{ form.image_file.label_tag }}
                {{ form.image_file }}
            </div>
            <div class="form-group">
                {{ form.title.label_tag }}
                {{ form.title }}
            </div>
            <div class="form-group">
                {{ form.description.label_tag }}
                {{ form.description }}
            </div>
            <div class="form-group">
                {{ form.tags.label_tag }}
                {{ form.tags }}
            </div>
            <button type="submit">Feltöltés</button>
        </form>
        <div class="image-preview">
            <p>Kép előnézete:</p>
            <img id="preview" src="#" alt="Előnézet" style="display: none; max-width: 300px; max-height: 300px;">
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Kép előnézet megjelenítése
    document.getElementById('id_image_file').onchange = function (e) {
        var preview = document.getElementById('preview');
        var file = e.target.files[0];
        if (file) {
            preview.src = URL.createObjectURL(file);
            preview.style.display = 'block';
        } else {
            preview.src = '#';
            preview.style.display = 'none';
        }
    };
</script>
{% endblock %}
